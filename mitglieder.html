<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mitglieder - Hexenjäger</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="hexenjaeger-symbol"></div>
            <h1>Mitgliederverwaltung</h1>
            <p>Verwalte Family Mitglieder</p>
            <a href="index.html" class="back-btn">← Zurück zur Übersicht</a>
        </header>

        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                <h2>Family Mitglieder</h2>
                <button id="addMemberBtn" class="btn btn-primary">➕ Neues Mitglied</button>
            </div>

            <div class="members-list" id="memberList"></div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        function renderMembers() {
            const members = db.getMembers();
            const memberList = document.getElementById('memberList');

            if (members.length === 0) {
                memberList.innerHTML = '<div class="no-data">Noch keine Mitglieder vorhanden</div>';
                return;
            }

            memberList.innerHTML = members.map(member => `
                <div class="member-item">
                    <div class="member-info">
                        <div class="member-name">${escapeHtml(member.name)}</div>
                        <div class="member-id">${escapeHtml(member.id)}</div>
                    </div>
                    <div class="member-actions">
                        <button onclick="editMember('${member.id}')" class="btn btn-secondary">Bearbeiten</button>
                        <button onclick="deleteMember('${member.id}')" class="btn btn-secondary">Löschen</button>
                    </div>
                </div>
            `).join('');
        }

        function editMember(id) {
            const members = db.getMembers();
            const member = members.find(m => m.id === id);
            if (member) {
                const newName = prompt('Neuen Namen eingeben:', member.name);
                if (newName && newName.trim()) {
                    const result = db.updateMember(id, newName.trim());
                    if (result.success) {
                        renderMembers();
                        showNotification('Mitglied erfolgreich bearbeitet!');
                    } else {
                        alert(result.error);
                    }
                }
            }
        }

        function deleteMember(id) {
            if (confirm('Mitglied wirklich löschen?')) {
                const result = db.deleteMember(id);
                if (result.success) {
                    renderMembers();
                    showNotification('Mitglied erfolgreich gelöscht!');
                } else {
                    alert(result.error);
                }
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const addMemberBtn = document.getElementById('addMemberBtn');

            addMemberBtn.addEventListener('click', () => {
                const name = prompt('Name des neuen Mitglieds:');
                if (!name) return;

                const id = prompt('ID des neuen Mitglieds (z.B. HJ001):');
                if (!id) return;

                const result = db.addMember(name.trim(), id.trim());
                if (result.success) {
                    renderMembers();
                    showNotification('Mitglied erfolgreich hinzugefügt!');
                } else {
                    alert(result.error);
                }
            });

            renderMembers();
        });
    </script>
</body>
</html>
